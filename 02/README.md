# 컴퓨터 시스템과 운영체제

## 1. 컴퓨터 시스템과 하드웨어

컴퓨터 시스템의 계층구조

1. 응용소프트웨어 층
2. 운영체제 층
3. 컴퓨터 하드웨어 층

하드웨어들은 운영체제의 배타적이고 독점적인 지배를 받는다.
사용자나 응용소프트웨어는 직접적으로 하드웨어에 접근 X. 무조건 운영체제를 통해서만 접근가능

### 컴퓨터 하드웨어

- CPU : 프로그램 코드 즉, 기계명령을 실행하는 중앙처리 장치. 전원이 공급되면 메모리에 적재된 프로그램을 실행
- Memory : CPU에 의해 실행되는 프로그램의 코드와 데이터가 적재되는 공간. 반도체 메모리 RAM이 사용된다.
- Cache Memory : 실제 메모리와 CPU 사이에서 빠르게 전달을 위해서 미리 데이터들을 저장해두는 좀 더 빠른 메모리 (빠른 응답 시간을 위해 자주 액세스하는 정보를 저장하는 데 사용되는 데이터 저장소 유형)

- Bus : CPU, 캐시메모리, RAM, 입출력 제어장치 및 시스템 제어회로 등 컴퓨터 하드웨어들이 서로 데이터를 주고 받기 위해 0과 1의 디지털 신호가 지나가는 여러가득의 선을 다발로 묶어 부르는 용어.
  - 주소 버스 : 주소(메모리나 입출력장치나 저장 장치 내에 있는 레지스터들에 대한 번지로 0번지에서 시작) 신호가 지나다니는 버스
  - 데이터 버스: 데이터 신호가 지나다니는 버스
  - 제어 버스 : 제어신호가 지나다니는 ㅂ스

### 시스템 버스 , 입출력 버스

시스템 버스는 CPU, 캐시메모리, 메모리 등 빠르게 작동하는 하드웨어들 사이에서 신호를 전송하기 위한 버스

입출력 버스는 상대적으로 느린 입출력 장치들로부터 입출력 데이터를 전송하기 위한 버스

### CPU와 메모리 관계

32비트 CPU란? 32개의 주소선을 가진 CPU
주소선 한 가닥에는 하나의 비트가 전달된다. 메모리 읽기의 경우 CPu가 주소를 발생시키며 메모리는 주소 버스를 통해 주소를 전달 받고 일정 시간 후에 해당 주소의 데이터를 데이터 버스에 내놓는다.

주소의 범위 : 0 ~ 2^32-1 번지 (2^32개)
메모리의 크기 : 4GB 한 번지의 크기는 1바이트 이므로 2^32 바이트 = 4GB

즉 32비트 CPU를 가진 컴퓨터에서 사용할 수 있는 메모리의 최대 크기는 4GB

### CPU

CPU는 전원이 켜지고 전원이 꺼질 때까지 기계명령을 실행하는 과정을 반복한다.

#### 명령사이클

CPU가 한 명령을 처리하는 과정

1. CPU는 PC\*레지스터에 저장된 주소(100번이라고 치자)를 주소버스에 싣는다.
2. 메모리는 주소버스로부터 주소 100을 받고 100번지에 저장된 데이터(mov eax, [300])를 데이터 버스에 싣는다.
3. CPU는 데이터 버스에 담긴 바이너리 값들을 IR\* 레지스터에 저장하고 PC는 다음 명령의 번지로 수정된다.
4. CPU는 연산에 필요한 데이터를 읽기 위해 데이터의 주소 300을 주소 버스에 싣는다.
5. 메모리는 300번지에 저장된 값을 데이터버스에 싣는다.
6. CPU는 데이터 버스로부터 저장된 값을 CPU 내부의 임시레지스터에 저장한다.
7. CPU는 명령을 해석하고 실행한다. (명령 실행 결과 eax 레지스터에 값이 저장된다.)

- 프로그램 카운터(PC): 다음에 실행할 명령어의 주소를 저장
- mov eax, [300] : 메모리 300번지의 데이터를 읽어 eax 레지스터에 저장
- 명령 레지스터(IR): 현재 실행 중인 명령어를 저장

### 스택

운영체제는 프로그램을 실행싴리 때 프로그램마다 4개의 공간을 제공한다.

- 코드공간: 프로그램 코드가 적재되는 메모리 공간
- 데이터공간 : 전역 변수들이 적재되는 공간
- 힙공간 : 프로그램이 실행 중 동적으로 저장할 데이터를 위한 공간
- 스택 공간 : 함수가 호출될 때 매개변수나 지역변수, 함수가 실행을 마치고 돌아갈 주소등을 젖아하기 위한 공간
